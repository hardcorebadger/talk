package trefethen.talk.packet;

import java.io.IOException;

import trefethen.talk.chat.ChatManager;
import trefethen.talk.networking.CommunicationServlet;
import trefethen.talk.user.User;
import trefethen.talk.user.UserManager;

public class PacketUserChats extends Packet {
	
	Integer[] ids;
	String[] names;
	
	public PacketUserChats() {
		this.id = 3;
	}
	
	public PacketUserChats(User u) {
		this();
		ids = u.getChats().toArray(new Integer[u.getChats().size()]);
		names = new String[ids.length];
		for (int i = 0; i < ids.length; i++) {
			// could mod this for DM naming convention
			names[i] = ChatManager.getChat(ids[i]).getName();
		}
	}

	@Override
	public void writeData(CommunicationServlet servlet) throws IOException {
		
	}

	@Override
	public void readData(CommunicationServlet servlet) throws IOException {
		// respond with the user chats
		servlet.addPacket(new PacketUserChats(UserManager.getUser(servlet)));
	}

}
