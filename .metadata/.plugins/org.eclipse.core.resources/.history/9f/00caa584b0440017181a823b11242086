package trefethen.talk.client;

import trefethen.talk.gui.CmdLineUI;
import trefethen.talk.networking.CommunicationClient;
import trefethen.talk.packet.PacketLogin;
import trefethen.talk.packet.PacketLogout;

public class TalkClient {
	
	public static CommunicationClient client;
	public static Thread communicationThread;
	public static int userID;
	
	public static void main(String[] args) {
		client = new CommunicationClient("localhost", 8888);
		communicationThread = new Thread(client);
		communicationThread.start();
		final Thread mainThread = Thread.currentThread();
		Runtime.getRuntime().addShutdownHook(new Thread() {
	      public void run() {
	    	  client.addPacket(new PacketLogout());
	    	  try {
				mainThread.join();
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
	      }
	    });
	}
	
	public static void onConnect() {
		CmdLineUI.startCmdLineUI();
	}

}
